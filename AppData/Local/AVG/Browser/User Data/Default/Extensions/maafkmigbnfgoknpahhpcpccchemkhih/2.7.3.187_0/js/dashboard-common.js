"use strict";self.uBlockDashboard=self.uBlockDashboard||{},self.uBlockDashboard.mergeNewLines=function(e,t){const n=new Map;let o=0,i=e.length;for(;o<i;){let t=e.indexOf("\n",o);-1===t&&(t=e.indexOf("\r",o),-1===t&&(t=i));const l=e.slice(o,t).trim();if(o=t+1,0===l.length)continue;const r=l.slice(0,8),c=n.get(r);void 0===c?n.set(r,l):"string"==typeof c?n.set(r,[c,l]):c.push(l)}const l=[""];for(o=0,i=t.length;o<i;){let e=t.indexOf("\n",o);-1===e&&(e=t.indexOf("\r",o),-1===e&&(e=i));const r=t.slice(o,e).trim();if(o=e+1,0===r.length){""!==l[l.length-1]&&l.push("");continue}const c=n.get(r.slice(0,8));void 0!==c&&("string"!=typeof c||r===c)?-1===c.indexOf(r)&&l.push(r):l.push(r)}const r=l.join("\n").trim();return""!==e&&""!==r&&(e+="\n\n"),e+r},self.uBlockDashboard.dateNowToSensibleString=function(){return new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().replace(/\.\d+Z$/,"").replace(/:/g,".").replace("T","_")},self.uBlockDashboard.patchCodeMirrorEditor=function(){let e,t;const n=function(){t.focus(),e=t=void 0},o=function(o){t=o,void 0===e&&(e=vAPI.setTimeout(n,1))},i=function(e,t){var n=e.getViewport();if(1===t.ranges.length){var i=t.ranges[0],l=i.anchor.line,r=i.head.line;r!==l&&(0!==i.head.ch&&(r+=1),l===n.from&&r===n.to&&(t.update([{anchor:{line:0,ch:0},head:{line:e.lineCount(),ch:0}}]),o(e)))}};let l=0,r=0;const c=function(e,t,n){if("CodeMirror-linenumbers"!==n)return;if(o(e),Date.now()-l>=500||t!==r)return e.setSelection({line:t,ch:0},{line:t+1,ch:0}),l=Date.now(),void(r=t);let i=0,c=e.lineCount();const s=e.getHelper({line:t,ch:0},"fold");if(s instanceof Function){const n=s(e,{line:t,ch:0});void 0!==n&&(i=n.from.line,c=n.to.line+1)}e.setSelection({line:i,ch:0},{line:c,ch:0},{scroll:!1}),l=0};return function(e){"contenteditable"===e.options.inputStyle&&e.on("beforeSelectionChange",i),e.on("gutterClick",c)}}(),self.uBlockDashboard.openOrSelectPage=function(e,t={}){let n;e instanceof MouseEvent&&(n=e,e=n.target.getAttribute("href"));const o=Object.assign({url:e,select:!0,index:-1},t);vAPI.messaging.send("default",{what:"gotoURL",details:o}),n&&n.preventDefault()},uDom("a").attr("target","_blank"),uDom('a[href*="dashboard.html"]').attr("target","_parent");