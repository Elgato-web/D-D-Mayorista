/*! For license information please see dom-inspector.js.LICENSE.txt */
"use strict";(()=>{if("object"!=typeof vAPI||!vAPI.domFilterer)return;var e=vAPI.sessionId;if(null!==document.querySelector("iframe.dom-inspector."+e))return;const t=(self,((n=function(e){this.message=e}).prototype=new Error).name="InvalidCharacterError",function(e,t){for(var o,i=String(e),r=i.length,l=-1,s="",c=i.charCodeAt(0);++l<r;){if(0===(o=i.charCodeAt(l)))throw new n("Invalid character: the input contains U+0000.");s+=o>=1&&o<=31||127===o||0===l&&o>=48&&o<=57||1===l&&o>=48&&o<=57&&45===c?"\\"+o.toString(16)+" ":o>=128||45===o||95===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||t&&34!==o&&92!==o?i.charAt(l):"\\"+i.charAt(l)}return s});var n;let o,i=null,r=null,l=new WeakMap,s=[];const c=new Map,a=new Set,d=new Set,u=/[ >+~]/,h=function(){const n=new Set(["br","head","link","meta","script","style","title"]),i=new Map([["a","href"],["iframe","src"],["img","src"],["object","data"]]);var r=0;const s=function(e){var t="n"+(r++).toString(36);return l.set(e,t),t},a=function(){this.nid=s(document.body),this.lvl=0,this.sel="body",this.cnt=0,this.filter=c.get(document.body)},d=function(e,n){this.nid=s(e),this.lvl=n,this.sel=function(e){var n,o,r,l,s,c=e.localName,a=t(c);"string"==typeof e.id&&""!==(n=e.id.trim())&&(a+="#"+t(n));var d=e.classList;if(d)for(s=0;s<d.length;s++)a+="."+t(d[s]);return void 0!==(o=i.get(c))&&(-1!==(r=(n=(n=e.getAttribute(o)||"").trim()).startsWith("data:")?5:n.search(/[#?]/))?(n=n.slice(0,r),l="^"):l="",""!==n&&(a+="["+o+l+'="'+t(n,!0)+'"]')),a}(e),this.cnt=0,this.filter=c.get(e)},u=function(t,o){var i=o.localName;return n.has(i)||o.classList.contains(e)?null:0===t&&"body"===i?new a:new d(o,t)},h=function(){for(var e,t=[],n=[],o=document.documentElement,i=0;;)if(null!==(e=u(i,o))&&t.push(e),null===o.firstElementChild){if(null===o.nextElementSibling){do{if(!(o=n.pop()))break;i-=1}while(null===o.nextElementSibling);if(!o)break}o=o.nextElementSibling}else n.push(o),i+=1,o=o.firstElementChild;return t},f=function(e){for(var t,n,o,i=[],r=0,l=e.length;l--;)if((n=e[l]).lvl!==r)if(n.lvl>r){for(;r<n.lvl;)i.push(0),r+=1;i[t=r-1]+=1}else o=i.pop(),n.cnt=o,i[t=(r-=1)-1]+=o+1;else i[t]+=1;return e};var m,p=null,v=[],w=[];const b=function(e){for(var t=e;;){if(null===(t=t.previousElementSibling))return null;if(!n.has(t.localName))return l.get(t)}},y=function(e,t,n){for(var o,i=e.firstElementChild;null!==i;)if(null!==(o=u(void 0,i))&&(n.set(o.nid,o),t.push(i)),null===i.firstElementChild)if(null===i.nextElementSibling)for(;;){if(i.parentElement===e)return;if(null!==(i=i.parentElement).nextElementSibling){i=i.nextElementSibling;break}}else i=i.nextElementSibling;else i=i.firstElementChild},E=function(){var e,t,n,i;m=void 0;var r=[],s=[],c=new Map;for(e of v)for(t of e)1===t.nodeType&&null!==t.parentElement&&(g.incremental(t),null!==(n=u(void 0,t))&&(c.set(n.nid,n),r.push(t)),y(t,r,c));for(e of(v=[],w))for(t of e)1===t.nodeType&&void 0!==(i=l.get(t))&&s.push({what:-1,nid:i});for(t of(w=[],r))s.push({what:1,nid:l.get(t),u:l.get(t.parentElement),l:b(t)});0!==s.length&&vAPI.MessagingConnection.sendTo(o,{what:"domLayoutIncremental",url:window.location.href,hostname:window.location.hostname,journal:s,nodes:Array.from(c)})},x=function(e){for(var t of e)0!==t.addedNodes.length&&v.push(t.addedNodes),0!==t.removedNodes.length&&w.push(t.removedNodes);void 0===m&&(m=vAPI.setTimeout(E,1e3))},S=function(){void 0!==m&&(clearTimeout(m),m=void 0),null!==p&&(p.disconnect(),p=null),v=[],w=[],l=new WeakMap};return{get:function(){return g.reset(),(p=new MutationObserver(x)).observe(document.body,{childList:!0,subtree:!0}),{what:"domLayoutFull",url:window.location.href,hostname:window.location.hostname,layout:f(h())}},reset:function(){S()},shutdown:S}}();let f=":scope > ";try{document.querySelector(":scope *")}catch(e){f=""}const g=function(){var e;"function"==typeof document.body.matches?e="matches":"function"==typeof document.body.mozMatchesSelector?e="mozMatchesSelector":"function"==typeof document.body.webkitMatchesSelector&&(e="webkitMatchesSelector");const t=function(t){!function(t){const n=c,o=vAPI.domFilterer.getAllSelectors();for(const i of o.declarative||[])for(const o of i[0].split(",\n")){let r,l=o;i[1]!==vAPI.hideStyle&&(l+=":style("+i[1]+")"),u.test(o)?r=document.querySelectorAll(o):(!1===n.has(t)&&t[e](o)&&n.set(t,l),r=t.querySelectorAll(o));for(const e of r)!1===n.has(e)&&n.set(e,l)}for(const e of o.procedural||[]){const t=e.exec();for(const o of t)n.set(o,e.raw)}}(t)};return{incremental:t,reset:function(){c.clear(),t(document.documentElement)},shutdown:function(){vAPI.domFilterer.toggle(!0)}}}(),m=function(){var e,t,n,o,l,u,h,f,g,m=i.children?i.children:Array.prototype.slice.apply(i.childNodes).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}));for(t of(e=[],a.keys()))t!==r&&(d.has(t)||"function"==typeof t.getBoundingClientRect&&(l=(n=t.getBoundingClientRect()).left,n.right,h=n.width,u=n.top,n.bottom,f=n.height,g=h.toFixed(1),o="M"+l.toFixed(1)+" "+u.toFixed(1)+"h"+g+"v"+f.toFixed(1)+"h-"+g+"z",e.push(o)));for(t of(m[0].setAttribute("d",e.join("")||"M0 0"),e=[],d))"function"==typeof t.getBoundingClientRect&&(l=(n=t.getBoundingClientRect()).left,n.right,h=n.width,u=n.top,n.bottom,f=n.height,g=h.toFixed(1),o="M"+l.toFixed(1)+" "+u.toFixed(1)+"h"+g+"v"+f.toFixed(1)+"h-"+g+"z",e.push(o));for(t of(m[1].setAttribute("d",e.join("")||"M0 0"),e=[],c.keys()))t!==r&&(d.has(t)||"function"==typeof t.getBoundingClientRect&&(l=(n=t.getBoundingClientRect()).left,n.right,h=n.width,u=n.top,n.bottom,f=n.height,g=h.toFixed(1),o="M"+l.toFixed(1)+" "+u.toFixed(1)+"h"+g+"v"+f.toFixed(1)+"h-"+g+"z",e.push(o)));for(t of(m[2].setAttribute("d",e.join("")||"M0 0"),e=[],s))t!==r&&"function"==typeof t.getBoundingClientRect&&(l=(n=t.getBoundingClientRect()).left,n.right,h=n.width,u=n.top,n.bottom,f=n.height,g=h.toFixed(1),o="M"+l.toFixed(1)+" "+u.toFixed(1)+"h"+g+"v"+f.toFixed(1)+"h-"+g+"z",e.push(o));m[3].setAttribute("d",e.join("")||"M0 0")},p=function(){let e=!1;const t=function(){e=!1,m()};return function(){!1===e&&(window.requestAnimationFrame(t),e=!0)}}(),v=function(e,t){const n=function(e,t){if(t||(t=document),-1!==e.indexOf(":")){const t=function(e){var t,n=[],o=/^(.+?):has\((.+?)\)$/.exec(e);if(null!==o){var i;try{i=document.querySelectorAll(o[1])}catch(e){i=[]}for(t=i.length;t--;){var r=i[t];null!==r.querySelector(o[2])&&n.push(r)}return n}if(null===(o=/^:xpath\((.+?)\)$/.exec(e)))return;const l=document.evaluate(o[1],document,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(t=l.snapshotLength;t--;)n.push(l.snapshotItem(t));return n}(e);if(void 0!==t)return t}try{return t.querySelectorAll(e)}catch(e){}return[]}(e);if(""===t)return n;for(const e of n)if(l.get(e)===t)return[e];return[]},w=function(e){e&&r.removeEventListener(e.type,w);const t=e.target.contentDocument,n=t.createElement("style");n.textContent=["body {","background-color: transparent;","}","svg {","height: 100%;","left: 0;","position: fixed;","top: 0;","width: 100%;","}","svg > path:nth-of-type(1) {","fill: rgba(255,0,0,0.2);","stroke: #F00;","}","svg > path:nth-of-type(2) {","fill: rgba(0,255,0,0.2);","stroke: #0F0;","}","svg > path:nth-of-type(3) {","fill: rgba(255,0,0,0.2);","stroke: #F00;","}","svg > path:nth-of-type(4) {","fill: rgba(0,0,255,0.1);","stroke: #FFF;","stroke-width: 0.5px;","}",""].join("\n"),t.body.appendChild(n),i=t.createElementNS("http://www.w3.org/2000/svg","svg"),i.appendChild(t.createElementNS("http://www.w3.org/2000/svg","path")),i.appendChild(t.createElementNS("http://www.w3.org/2000/svg","path")),i.appendChild(t.createElementNS("http://www.w3.org/2000/svg","path")),i.appendChild(t.createElementNS("http://www.w3.org/2000/svg","path")),t.body.appendChild(i),window.addEventListener("scroll",p,!0),vAPI.messaging.extend().then((e=>{!0===e&&vAPI.MessagingConnection.connectTo("domInspector","loggerUI",(e=>{switch(e.what){case"connectionAccepted":o=e.id,function(){const e=function(t){t&&document.removeEventListener(t.type,e),vAPI.MessagingConnection.sendTo(o,h.get()),vAPI.domFilterer.toggle(!1,m)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();break;case"connectionBroken":g.shutdown(),h.shutdown(),vAPI.MessagingConnection.disconnectFrom(o),window.removeEventListener("scroll",p,!0),document.documentElement.removeChild(r),r=i=null;break;case"connectionMessage":!function(e){var t,n;switch(e.what){case"commitFilters":m();break;case"domLayout":t=h.get(),m();break;case"highlightMode":default:break;case"highlightOne":s=v(e.selector,e.nid),m();break;case"resetToggledNodes":d.clear(),a.clear(),m();break;case"showCommitted":case"showInteractive":s=[],m();break;case"toggleFilter":0!==(n=v(e.selector,e.nid)).length&&n[0].scrollIntoView(),function(e,t){for(const n of e)t?d.add(n):d.delete(n)}(function(e){const t=[];for(const n of c)n[1]===e&&t.push(n[0]);return t}(e.filter),e.target),m();break;case"toggleNodes":0!==(n=v(e.selector,e.nid)).length&&n[0].scrollIntoView(),function(e,t){for(const n of e)t?a.delete(n):a.add(n)}(n,e.target),m()}}(e.payload)}}))}))};r=document.createElement("iframe"),r.classList.add(e),r.classList.add("dom-inspector"),r.style.cssText=["background: transparent","border: 0","border-radius: 0","box-shadow: none","display: block","height: 100%","left: 0","margin: 0","opacity: 1","position: fixed","outline: 0","padding: 0","pointer-events:none;","top: 0","visibility: visible","width: 100%","z-index: 2147483647",""].join(" !important;\n"),r.addEventListener("load",(e=>{w(e)})),document.documentElement.appendChild(r)})();