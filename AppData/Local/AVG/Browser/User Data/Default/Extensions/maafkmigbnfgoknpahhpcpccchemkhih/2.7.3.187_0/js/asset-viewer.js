"use strict";(async()=>{const e=new URL(document.location),t=e.searchParams,s=t.get("url");if(null===s)return;const n=null!==t.get("subscribe")?document.getElementById("subscribe"):null;if(null!==n&&"#subscribed"!==e.hash){const e=t.get("title"),o=document.getElementById("subscribePrompt");o.children[0].textContent=e;const r=o.children[1];r.textContent=s,r.setAttribute("href",s),n.classList.remove("hide")}const o=new CodeMirror(document.getElementById("content"),{autofocus:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,maxScanLines:1,readOnly:!0,styleActiveLine:{nonEmpty:!0}});uBlockDashboard.patchCodeMirrorEditor(o);const r=await vAPI.messaging.send("dashboard",{what:"getAutoCompleteDetails"});if(r instanceof Object){const e=o.getMode();e.setHints instanceof Function&&e.setHints(r)}const i=await vAPI.messaging.send("default",{what:"getAssetContent",url:s});if(o.setValue(i&&i.content||""),null!==n&&document.getElementById("subscribeButton").addEventListener("click",(()=>{n.classList.add("hide"),vAPI.messaging.send("scriptlets",{what:"applyFilterListSelection",toImport:s}).then((()=>{vAPI.messaging.send("scriptlets",{what:"reloadAllFilters"})}))}),{once:!0}),i.sourceURL){const e=document.querySelector(".cm-search-widget .sourceURL");e.setAttribute("href",i.sourceURL),e.setAttribute("title",i.sourceURL)}document.body.classList.remove("loading")})();