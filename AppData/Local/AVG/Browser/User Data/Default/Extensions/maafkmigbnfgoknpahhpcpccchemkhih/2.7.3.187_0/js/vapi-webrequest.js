"use strict";(()=>{if(!1===vAPI.webextFlavor.soup.has("chromium"))return;const e=new Map([["eot","font"],["otf","font"],["svg","font"],["ttf","font"],["woff","font"],["woff2","font"],["mp3","media"],["mp4","media"],["webm","media"],["gif","image"],["ico","image"],["jpeg","image"],["jpg","image"],["png","image"],["webp","image"]]),t=new URL("https://www.example.org/");vAPI.Net=class extends vAPI.Net{constructor(){super(),this.suspendedTabIds=new Set}normalizeDetails(s){"string"==typeof s.initiator&&"null"!==s.initiator&&(s.documentUrl=s.initiator);let r=s.type;if("imageset"===r)return void(s.type="image");if("other"!==r)return;t.href=s.url;const n=t.pathname,i=n.indexOf(".",n.length-6);if(-1!==i&&(r=e.get(n.slice(i+1))))s.type=r;else if(s.responseHeaders){if(r=((e,t)=>{let s=e.length;for(;s--;)if("content-type"===e[s].name.toLowerCase())return e[s].value.trim();return""})(s.responseHeaders),r.startsWith("font/"))return void(s.type="font");if(r.startsWith("image/"))return void(s.type="image");if(r.startsWith("audio/")||r.startsWith("video/"))return void(s.type="media")}}denormalizeTypes(t){if(0===t.length)return Array.from(this.validTypes);const s=new Set;for(const e of t)this.validTypes.has(e)&&s.add(e);if(!1===s.has("other"))for(const t of e.values())if(s.has(t)){s.add("other");break}return Array.from(s)}suspendOneRequest(e){return this.suspendedTabIds.add(e.tabId),{cancel:!0}}unsuspendAllRequests(){for(const e of this.suspendedTabIds)vAPI.tabs.reload(e);this.suspendedTabIds.clear()}}})(),vAPI.prefetching=(()=>{if(!1===vAPI.webextFlavor.soup.has("chromium"))return;let e=!1;const t=function(e){return e.responseHeaders.push({name:"X-DNS-Prefetch-Control",value:"off"}),{responseHeaders:e.responseHeaders}};return s=>{const r=chrome.webRequest;s&&e?(r.onHeadersReceived.removeListener(t),e=!1):s||e||(r.onHeadersReceived.addListener(t,{urls:["http://*/*","https://*/*"],types:["main_frame","sub_frame"]},["blocking","responseHeaders"]),e=!0)}})();