"use strict";CodeMirror.defineMode("ubo-dynamic-filtering",(()=>{const e=new Set(["no-strict-blocking:","no-popups:","no-cosmetic-filtering:","no-remote-fonts:","no-large-media:","no-csp-reports:","no-scripting:"]),n=new Set(["true","false"]),t=new Set(["*","3p","image","inline-script","1p-script","3p-script","3p-frame"]),l=new Set(["doc","main_frame"]),r=new Set(["block","allow","noop"]),o=new URL(self.location.href),s=/[%]|^\.|\.$/,u=[];let i,c=0,a=0,p=new Map;const g=e=>{if("*"===e)return!0;o.hostname="_";try{o.hostname=e}catch(e){return!1}const n=o.hostname;return"_"!==n&&""!==n&&!1===s.test(n)},h=(e,n=null)=>{let t=a;t===u.length&&(u[t]={len:0,style:null});const l=u[t];l.len=e,l.style=n,a+=1},f=(e,n=null)=>{const t=null!==e?e[0].length:0;return h(t,n),null!==e?e.input.slice(t):""},m=(e,n=null)=>{const t=e[0];if("*"===t)return f(e,n);let l=p.get(t)||"";""===l&&void 0!==i&&(l=/(\d|\])$/.test(t)?t:i.getDomain(t)||t);const r=t.length-l.length;0!==r&&h(r,n);let o=l.indexOf(".");return-1===o&&(o=l.length),h(o,null!==n?`${n} strong`:"strong"),o<l.length&&h(l.length-o,n),e.input.slice(t.length)};return{token:function(o){if(o.sol()&&((o,s)=>{c=0,a=0;let{string:u}=o;if("..."===u)return;const{sortType:i}=s,p=/^\s+/,h=/^\S+/;let d=p.exec(u);if(null!==d&&(u=f(d)),d=h.exec(u),null===d)return;const x=e.has(d[0]);if(u=x?f(d,0===i?"sortkey":null):g(d[0])?m(d,1===i?"sortkey":null):f(d,"error"),d=p.exec(u),null===d)return;if(u=f(d),d=h.exec(u),null===d)return;const y=!1===x&&d[0].includes("://");u=y?f(d,x?"error":2===i?"sortkey":null):!1===g(d[0])?f(d,"error"):m(d,1===i&&x||2===i?"sortkey":null),d=p.exec(u),null!==d&&(u=f(d),d=h.exec(u),null!==d&&(u=x?n.has(d[0])?f(d,"true"===d[0]?"blockrule":"allowrule"):f(d,"error"):y?l.has(d[0])?f(d,"error"):f(d):t.has(d[0])?f(d):f(d,"error"),d=p.exec(u),null!==d&&(u=f(d),d=h.exec(u),null!==d&&(u=x||!1===r.has(d[0])?f(d,"error"):f(d,`${d[0]}rule`),d=p.exec(u),null!==d&&(u=f(d),d=h.exec(u),null!==d&&(u=f(null,"error")))))))})(o,this),c>=a)return o.skipToEnd(o),null;const{len:s,style:i}=u[c++];return 0===s?o.skipToEnd():o.pos+=s,i},sortType:1,setHostnameToDomainMap:e=>{p=e},setPSL:e=>{i=e}}}));