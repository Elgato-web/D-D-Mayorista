"use strict";µBlock.contextMenu=(()=>{if(void 0===vAPI.contextMenu)return{update:function(){}};const e=function(e,t){return"uBlock0-blockElement"===e.menuItemId?function(e,t){if(void 0===t)return;if(!1===/^https?:\/\//.test(t.url))return;let n=e.tagName||"",l=e.frameUrl||e.srcUrl||e.linkUrl||"";n||("string"==typeof e.frameUrl?n="iframe":"string"==typeof e.srcUrl?"image"===e.mediaType?n="img":"video"===e.mediaType?n="video":"audio"===e.mediaType&&(n="audio"):"string"==typeof e.linkUrl&&(n="a")),µBlock.epickerArgs.mouse=!0,µBlock.elementPickerExec(t.id,0,`${n}\t${l}`)}(e,t):"uBlock0-blockElementInFrame"===e.menuItemId?function(e,t){void 0!==t&&!1!==/^https?:\/\//.test(e.frameUrl)&&(µBlock.epickerArgs.mouse=!1,µBlock.elementPickerExec(t.id,e.frameId))}(e,t):"uBlock0-temporarilyAllowLargeMediaElements"===e.menuItemId?function(e,t){if(void 0===t)return;let n=µBlock.pageStoreFromTabId(t.id);null!==n&&n.temporarilyAllowLargeMediaElements(!0)}(0,t):void 0},t={blockElement:{id:"uBlock0-blockElement",title:vAPI.i18n("pickerContextMenuEntry"),contexts:["all"]},blockElementInFrame:{id:"uBlock0-blockElementInFrame",title:vAPI.i18n("contextMenuBlockElementInFrame"),contexts:["frame"]},temporarilyAllowLargeMediaElements:{id:"uBlock0-temporarilyAllowLargeMediaElements",title:vAPI.i18n("contextMenuTemporarilyAllowLargeMediaElements"),contexts:["all"]}};let n=0;const l=function(l){let o=0;if(µBlock.userSettings.contextMenuEnabled&&void 0!==l){let e=µBlock.pageStoreFromTabId(l);e&&e.getNetFilteringSwitch()&&(o|=1,0!==e.largeMediaCount&&(o|=2))}if(o===n)return;n=o;let r=[];1&o&&(r.push(t.blockElement),r.push(t.blockElementInFrame)),2&o&&r.push(t.temporarilyAllowLargeMediaElements),vAPI.contextMenu.setEntries(r,e)};return vAPI.contextMenu.onMustUpdate=async function(e){if(!1===µBlock.userSettings.contextMenuEnabled)return l();if(void 0!==e)return l(e);const t=await vAPI.tabs.getCurrent();t instanceof Object!=0&&l(t.id)},{update:vAPI.contextMenu.onMustUpdate}})();