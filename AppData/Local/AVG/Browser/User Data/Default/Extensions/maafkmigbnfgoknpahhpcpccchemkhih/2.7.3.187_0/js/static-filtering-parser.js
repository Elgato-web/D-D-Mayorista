"use strict";{const t=class{constructor(t={}){this.interactive=!0===t.interactive,this.raw="",this.slices=[],this.leftSpaceSpan=new de,this.exceptionSpan=new de,this.patternLeftAnchorSpan=new de,this.patternSpan=new de,this.patternRightAnchorSpan=new de,this.optionsAnchorSpan=new de,this.optionsSpan=new de,this.commentSpan=new de,this.rightSpaceSpan=new de,this.eolSpan=new de,this.spans=[this.leftSpaceSpan,this.exceptionSpan,this.patternLeftAnchorSpan,this.patternSpan,this.patternRightAnchorSpan,this.optionsAnchorSpan,this.optionsSpan,this.commentSpan,this.rightSpaceSpan,this.eolSpan],this.patternTokenIterator=new ye(this),this.netOptionsIterator=new me(this),this.extOptionsIterator=new xe(this),this.maxTokenLength=Number.MAX_SAFE_INTEGER,this.expertMode=!1!==t.expertMode,this.reIsLocalhostRedirect=/(?:0\.0\.0\.0|(?:broadcast|local)host|local|ip6-\w+)(?:[^\w.-]|$)/,this.reHostname=/^[^\x00-\x24\x26-\x29\x2B\x2C\x2F\x3A-\x40\x5B-\x5E\x60\x7B-\x7F]+/,this.reHostsSink=/^[\w-.:\[\]]+$/,this.reHostsSource=/^[^\x00-\x24\x26-\x29\x2B\x2C\x2F\x3A-\x40\x5B-\x5E\x60\x7B-\x7F]+$/,this.reUnicodeChar=/[^\x00-\x7F]/,this.reUnicodeChars=/[^\x00-\x7F]/g,this.reHostnameLabel=/[^.]+/g,this.rePlainHostname=/^(?:[\w-]+\.)*[a-z]+$/,this.rePlainEntity=/^(?:[\w-]+\.)+\*$/,this.reEntity=/^[^*]+\.\*$/,this.punycoder=new URL(self.location),this.reGoodRegexToken=/[^\x01%0-9A-Za-z][%0-9A-Za-z]{7,}|[^\x01%0-9A-Za-z][%0-9A-Za-z]{1,6}[^\x01%0-9A-Za-z]/,this.selectorCompiler=new this.SelectorCompiler(this),this.result={exception:!1,raw:"",compiled:"",pseudoclass:!1},this.reset()}reset(){this.sliceWritePtr=0,this.category=r,this.allBits=0,this.patternBits=0,this.optionsBits=0,this.flavorBits=0;for(const t of this.spans)t.reset();this.pattern=""}analyze(t){this.slice(t);let e=this.leftSpaceSpan.len;if(e!==this.rightSpaceSpan.i)if(s(this.slices[e],W)){if(s(this.slices[e],l)&&(this.analyzeExt(e),this.category===n))return;this.category=a}else{if(this.commentSpan.i=this.rightSpaceSpan.i,s(this.allBits,l)){let t=this.findFirstMatch(e,l);if(-1!==t){if(this.analyzeExt(t),this.category===n)return;if(0!=(this.allBits&h))for(;;){if(s(this.slices[t-3],h)){this.commentSpan.i=t-3,this.commentSpan.len=this.rightSpaceSpan.i-t;break}if(t=this.findFirstMatch(t+6,l),-1===t)break}}}this.analyzeNet()}}analyzeExtra(){this.category===n?this.analyzeExtExtra():this.category===o&&this.analyzeNetExtra()}analyzeExt(t){let i=this.rightSpaceSpan.i;const r=this.slices[t+2];if(r>3)return;if(1!==r){if(2===r){if(t+3===i||s(this.slices[t+3],h))return}else this.splitSlot(t,2),i=this.rightSpaceSpan.i;return this.optionsSpan.i=this.leftSpaceSpan.i+this.leftSpaceSpan.len,this.optionsSpan.len=t-this.optionsSpan.i,this.optionsAnchorSpan.i=t,this.optionsAnchorSpan.len=3,this.patternSpan.i=t+3,this.patternSpan.len=this.rightSpaceSpan.i-this.patternSpan.i,this.category=n,void this.analyzeExtPattern()}let o=0,a=t+3;if(a!==i){if(s(this.slices[a],B)){if(1!==this.slices[a+2])return;if(o|=_,a+=3,a===i)return}if(s(this.slices[a],u)){if(1!==this.slices[a+2])return;if(o|=J,a+=3,a===i)return;if(s(this.slices[a],P)){if(1!==this.slices[a+2])return;if(o|=K,a+=3,a===i)return}}else if(s(this.slices[a],S|P)){if(1!==this.slices[a+2])return;if(o|=s(this.slices[a],P)?K:it,a+=3,a===i)return}e(this.slices[a],l)||(this.slices[a+2]>1&&this.splitSlot(a,1),a+=3,this.optionsSpan.i=this.leftSpaceSpan.i+this.leftSpaceSpan.len,this.optionsSpan.len=t-this.optionsSpan.i,this.optionsAnchorSpan.i=t,this.optionsAnchorSpan.len=a-this.optionsAnchorSpan.i,this.patternSpan.i=a,this.patternSpan.len=this.rightSpaceSpan.i-a,this.flavorBits=o,this.category=n,this.analyzeExtPattern())}}analyzeExtPattern(){this.result.exception=this.isException(),this.result.compiled=void 0,this.result.pseudoclass=!1;let t=this.strFromSpan(this.patternSpan);if(""===t)return this.flavorBits|=it,void(this.result.raw="");const{i:e}=this.patternSpan;if(s(this.slices[e],m)&&t.startsWith("+js(")&&t.endsWith(")"))return this.flavorBits|=tt,this.result.raw=t,void(this.result.compiled=t.slice(4,-1));s(this.slices[e],I)?(this.flavorBits|=et,t=t.slice(1)):this.flavorBits|=Y,this.result.raw=t,!1===this.selectorCompiler.compile(t,this.result)&&(this.flavorBits|=it)}analyzeExtExtra(){if(this.hasOptions()){const{i:t,len:e}=this.optionsSpan;this.analyzeDomainList(t,t+e,y,14)}s(this.flavorBits,it)&&this.markSpan(this.patternSpan,H)}analyzeNet(){let t=this.leftSpaceSpan.len;if(this.exceptionSpan.i=this.leftSpaceSpan.len,t<this.commentSpan.i&&s(this.slices[t],B)){const e=this.slices[t+2];e>=2&&(e>2&&this.splitSlot(t,2),this.exceptionSpan.len=3,t+=3,this.flavorBits|=_)}this.optionsAnchorSpan.i=this.optionsSpan.i=this.commentSpan.i,this.patternSpan.i=t,this.patternSpan.len=this.optionsAnchorSpan.i-t;let i=t<this.optionsAnchorSpan.i&&s(this.slices[t],g),r=i;if(i){const{i:t,len:e}=this.patternSpan;r=3===e&&this.slices[t+2]>2||e>3&&s(this.slices[t+e-3],g)}if(!1===r){let e=0,n=this.optionsAnchorSpan.i-3;for(;n-=3,!(n<t);){const t=this.slices[n];if(s(t,u)&&s(this.slices[n+3],U|y|C))break;e|=t}if(n>=t){const t=this.slices[n+2];if(t>1&&(this.findFirstOdd(0,M|y|d)===n?(this.flavorBits|=rt,this.interactive&&this.errorSlices(n,n+3)):(this.splitSlot(n,t-1),n+=3)),this.patternSpan.len=n-this.patternSpan.i,this.optionsAnchorSpan.i=n,this.optionsAnchorSpan.len=3,n+=3,this.optionsSpan.i=n,this.optionsSpan.len=this.commentSpan.i-n,this.optionsBits=e,i){const{i:t,len:e}=this.patternSpan;r=3===e&&this.slices[t+2]>2||e>3&&s(this.slices[t+e-3],g)}}}if(r&&(this.flavorBits|=j),this.patternLeftAnchorSpan.i=this.patternSpan.i,this.patternRightAnchorSpan.i=this.optionsAnchorSpan.i,!1===r){if(0!==this.patternSpan.len&&s(this.slices[this.patternSpan.i],R)){this.patternLeftAnchorSpan.len=3;const t=this.slices[this.patternSpan.i+2];t>2?this.splitSlot(this.patternSpan.i,2):this.patternSpan.len-=3,this.patternSpan.i+=3,this.flavorBits|=1===t?q:Z}if(0!==this.patternSpan.len){const t=this.patternSpan.len>3?this.patternRightAnchorSpan.i-3:this.patternSpan.i,e=this.slices[t];if(0!=(e&R)){this.patternRightAnchorSpan.i=t,this.patternRightAnchorSpan.len=3;const e=this.slices[this.patternRightAnchorSpan.i+2];e>1?(this.splitSlot(this.patternRightAnchorSpan.i,e-1),this.patternRightAnchorSpan.i+=3):this.patternSpan.len-=3,this.flavorBits|=G}else s(e,I)&&1===this.slices[t+2]&&s(this.flavorBits,Z)&&this.skipUntilNot(this.patternSpan.i,t,M)===t&&(this.patternRightAnchorSpan.i=t,this.patternRightAnchorSpan.len=3,this.patternSpan.len-=3,this.flavorBits|=Q)}}{const{i:t,len:e}=this.patternSpan,i=0===this.optionsAnchorSpan.len;let r=e;for(;0!==r;){r-=3;const e=this.slices[t+r];if(i&&s(e,h))break;this.patternBits|=e}if(0!==r){const t=this.strFromSlices(this.patternSpan.i,r-3);if(this.reHostsSink.test(t)){this.patternSpan.i+=r+3,this.patternSpan.len-=r+3,this.interactive&&this.markSlices(0,this.patternSpan.i,L);const t=this.getNetPattern();this.reIsLocalhostRedirect.test(t)?this.flavorBits|=st:!1===this.reHostsSource.test(t)&&(this.patternBits|=H)}else this.patternBits|=H;s(this.patternBits,H)&&this.markSpan(this.patternSpan,H)}}{let{i:t,len:i}=this.patternSpan;i>3&&s(this.slices[t],d)&&e(this.slices[t+3],D)&&(this.slices[t]|=L,t+=3,i-=3,this.patternSpan.i=t,this.patternSpan.len=i,0!==this.patternLeftAnchorSpan.len&&(this.slices[this.patternLeftAnchorSpan.i]|=L,this.flavorBits&=~nt)),i>3&&s(this.slices[t+i-3],d)&&e(this.slices[t+i-6],D)&&((e(this.slices[t],g)||e(this.slices[t+i-6],g))&&(this.slices[t+i-3]|=L),i-=3,this.patternSpan.len=i,0!==this.patternRightAnchorSpan.len&&(this.slices[this.patternRightAnchorSpan.i]|=L,this.flavorBits&=~ot)),(0===i||0!==i&&s(this.slices[t],d))&&s(this.flavorBits,nt)&&(this.slices[this.patternLeftAnchorSpan.i]|=L,this.flavorBits&=~nt),(0===i||0!==i&&s(this.slices[t+i-3],d))&&s(this.flavorBits,ot)&&(this.slices[this.patternRightAnchorSpan.i]|=L,this.flavorBits&=~ot)}this.category=o}analyzeNetExtra(){this.patternIsRegex()?!1===this.regexUtils.isValid(this.getNetPattern())&&this.markSpan(this.patternSpan,H):!1===this.patternIsDubious()&&!1===this.toASCII(!0)&&this.errorSlices(this.patternLeftAnchorSpan.i,this.optionsAnchorSpan.i),this.netOptionsIterator.init()}analyzeDomainList(t,e,i,r){if(t>=e)return;let n=t;for(s(this.slices[n],i)&&(this.errorSlices(n,n+3),n+=3);n<e;){let t=this.skipUntil(n,e,i);t<e&&1!==this.slices[t+2]&&this.errorSlices(t,t+3),!1===this.analyzeDomain(n,t,r)&&this.errorSlices(n,t),n=t+3}s(this.slices[e-3],i)&&this.errorSlices(e-3,e)}analyzeDomain(t,e,s){return e!==t&&void 0!==this.normalizeHostnameValue(this.strFromSlices(t,e-3),s)}normalizeHostnameValue(t,e=0){const s=126===t.charCodeAt(0);if(s&&0==(8&e))return;let i=!1===s?t:t.slice(1);if(this.rePlainHostname.test(i))return t;const r=-1!==i.lastIndexOf("*");if(r){if(0===e)return;if(1===i.length){if(s||0==(4&e))return;return t}if(0!=(2&e)){if(this.rePlainEntity.test(i))return t;if(!1===this.reEntity.test(i))return}else if(0==(1&e))return;i=i.replace(/\*/g,"__asterisk__")}this.punycoder.hostname="_";try{this.punycoder.hostname=i,i=this.punycoder.hostname}catch(t){return}return"_"!==i&&""!==i&&(r&&(i=this.punycoder.hostname.replace(/__asterisk__/g,"*")),0!=(1&e)||46!==i.charCodeAt(0)&&46!==i.charCodeAt(i.length-1))?s?"~"+i:i:void 0}slice(t){this.reset(),this.raw=t;const e=t.length;if(0===e)return;const s=F|A,i=this.slices;let r=this.sliceWritePtr,n=t.charCodeAt(0),o=n<128?V[n]:s;i[r+0]=o,i[r+1]=0,r+=2;let a=o,p=0,c=1;for(;c<e;){n=t.charCodeAt(c);const e=n<128?V[n]:s;e!==o&&(i[r+0]=c-p,i[r+1]=e,i[r+2]=c,r+=3,a|=e,o=e,p=c),c+=1}i[r+0]=c-p,r+=1,this.eolSpan.i=r,i[r+0]=0,i[r+1]=e,i[r+2]=0,r+=3,0!=(i[0]&h)?this.leftSpaceSpan.len=3:this.leftSpaceSpan.len=0;const l=this.eolSpan.i-3;l>this.leftSpaceSpan.i&&0!=(i[l]&h)?(this.rightSpaceSpan.i=l,this.rightSpaceSpan.len=3):(this.rightSpaceSpan.i=this.eolSpan.i,this.rightSpaceSpan.len=0),this.sliceWritePtr=r,this.allBits=a}splitSlot(t,e){this.sliceWritePtr+=3,this.sliceWritePtr>this.slices.length&&this.slices.push(0,0,0),this.slices.copyWithin(t+3,t,this.sliceWritePtr-3),this.slices[t+3+1]=this.slices[t+1]+e,this.slices[t+3+2]=this.slices[t+2]-e,this.slices[t+2]=e;for(const e of this.spans)e.i>t&&(e.i+=3)}markSlices(t,e,s){for(;t<e;)this.slices[t]|=s,t+=3}markSpan(t,e){const{i:s,len:i}=t;this.markSlices(s,s+i,e)}unmarkSlices(t,e,s){for(;t<e;)this.slices[t]&=~s,t+=3}errorSlices(t,e){this.markSlices(t,e,H)}findFirstMatch(t,e){let s=t;for(;s<this.sliceWritePtr;){if(0!=(this.slices[s]&e))return s;s+=3}return-1}findFirstOdd(t,e){let s=t;for(;s<this.sliceWritePtr;){if(0==(this.slices[s]&e))return s;s+=3}return-1}skipUntil(t,e,s){let i=t;for(;i<e&&0==(this.slices[i]&s);)i+=3;return i}skipUntilNot(t,e,s){let i=t;for(;i<e&&0!=(this.slices[i]&s);)i+=3;return i}strFromSlices(t,e){return this.raw.slice(this.slices[t+1],this.slices[e+1]+this.slices[e+2])}strFromSpan(t){if(0===t.len)return"";const e=t.i;return this.strFromSlices(e,e+t.len-3)}isBlank(){return this.allBits===h}hasOptions(){return 0!==this.optionsSpan.len}getPattern(){if(""!==this.pattern)return this.pattern;const{i:t,len:e}=this.patternSpan;if(0===e)return"";let s=this.slices[t+1],i=this.slices[t+e+1];return this.pattern=this.raw.slice(s,i),this.pattern}getNetPattern(){if(""!==this.pattern)return this.pattern;const{i:t,len:e}=this.patternSpan;if(0===e)return"";let i=this.slices[t+1],r=this.slices[t+e+1];return s(this.flavorBits,j)&&(i+=1,r-=1),this.pattern=this.raw.slice(i,r),this.pattern}patternIsDubious(){if(s(this.patternBits,H))return!0;if(s(this.patternBits,h))return this.interactive&&this.markSpan(this.patternSpan,H),!0;if(this.patternSpan.len>3||0!==this.optionsSpan.len)return!1;if(3===this.patternSpan.len&&1!==this.slices[this.patternSpan.i+2]&&e(this.patternBits,d))return!1;if(!1===this.interactive)return!0;let t,i;return 0!==this.patternSpan.len?(t=this.patternSpan.i,i=this.optionsAnchorSpan.i):(t=this.patternLeftAnchorSpan.i,i=0!==this.patternLeftAnchorSpan.len?this.optionsAnchorSpan.i:this.optionsSpan.i),this.errorSlices(t,i),!0}patternIsMatchAll(){const{len:t}=this.patternSpan;return 0===t||3===t&&s(this.patternBits,d)}patternIsPlainHostname(){if(s(this.patternBits,~M)||s(this.flavorBits,ht)&&i(this.flavorBits,at))return!1;const{i:t,len:e}=this.patternSpan;return s(this.slices[t],U)&&s(this.slices[t+e-3],U)}patternIsLeftHostnameAnchored(){return s(this.flavorBits,Z)}patternIsRightHostnameAnchored(){return s(this.flavorBits,Q)}patternIsLeftAnchored(){return s(this.flavorBits,q)}patternIsRightAnchored(){return s(this.flavorBits,G)}patternIsRegex(){return 0!=(this.flavorBits&j)}patternIsTokenizable(){return!1===this.patternIsRegex||this.reGoodRegexToken.test(this.regexUtils.toTokenizableStr(this.getNetPattern()))}patternHasWildcard(){return s(this.patternBits,d)}patternHasCaret(){return s(this.patternBits,I)}patternHasUnicode(){return s(this.patternBits,F)}patternHasUppercase(){return s(this.patternBits,w)}patternToLowercase(){const t=this.patternHasUppercase();if(!1===t&&""!==this.pattern)return this.pattern;const{i:e,len:s}=this.patternSpan;if(0===s)return"";const i=this.slices[e+1],r=this.slices[e+s+1];return this.pattern=this.pattern||this.raw.slice(i,r),!1===t||(this.pattern=this.pattern.toLowerCase(),this.raw=this.raw.slice(0,i)+this.pattern+this.raw.slice(r),this.unmarkSlices(e,e+s,w),this.patternBits&=~w),this.pattern}patternHasSpace(){return s(this.flavorBits,X)}patternHasLeadingWildcard(){if(!1===s(this.patternBits,d))return!1;const{i:t,len:e}=this.patternSpan;return 0!==e&&s(this.slices[t],d)}patternHasTrailingWildcard(){if(!1===s(this.patternBits,d))return!1;const{i:t,len:e}=this.patternSpan;return 0!==e&&s(this.slices[t+e-1],d)}optionHasUnicode(){return s(this.optionsBits,F)}netOptions(){return this.netOptionsIterator}extOptions(){return this.extOptionsIterator}patternTokens(){return this.category===o?this.patternTokenIterator:[]}setMaxTokenLength(t){this.maxTokenLength=t}hasUnicode(){return s(this.allBits,F)}toLowerCase(){return s(this.allBits,w)&&(this.raw=this.raw.toLowerCase()),this.raw}toASCII(t=!1){if(!1===this.patternHasUnicode())return!0;const{i:e,len:s}=this.patternSpan;if(0===s)return!0;const i=this.patternIsRegex();let r=this.getNetPattern();if(!1===i){const t=this.reHostname.exec(r);null!==t&&(r=t[0].replace(this.reHostnameLabel,(t=>!1===this.reUnicodeChar.test(t)?t:(45===t.charCodeAt(0)&&(t="*"+t),this.normalizeHostnameValue(t,1)||t)))+r.slice(t.index+t[0].length))}if(this.reUnicodeChar.test(r))try{r=r.replace(this.reUnicodeChars,(t=>encodeURIComponent(t)))}catch(t){return!1}if(t)return!0;i&&(r=`/${r}/`);const n=this.slices[e+1],o=this.slices[e+s+1],a=this.raw.slice(0,n)+r+this.raw.slice(o);return this.analyze(a),!0}hasFlavor(t){return s(this.flavorBits,t)}isException(){return s(this.flavorBits,_)}shouldIgnore(){return s(this.flavorBits,st)}hasError(){return s(this.flavorBits,rt)}shouldDiscard(){return s(this.flavorBits,rt|it|st)}static parseRedirectValue(t){let e=t.trim(),s=0;const i=37===e.charCodeAt(0);i&&(e=e.slice(1));const r=/:-?\d+$/.exec(e);return null!==r&&(s=parseInt(e.slice(r.index+1),10),e=e.slice(0,r.index)),{token:e,priority:s,asDataURI:i}}static parseQueryPruneValue(t){let e=t.trim();if(""===e)return{all:!0};const s={};s.not=126===e.charCodeAt(0),s.not&&(e=e.slice(1));const i=/^\/(.+)\/(i)?$/.exec(e);if(null!==i){try{s.re=new RegExp(i[1],i[2]||"")}catch(t){s.bad=!0}return s}if(e.startsWith("|")){try{s.re=new RegExp("^"+e.slice(1),"i")}catch(t){s.bad=!0}return s}return e.includes("|")?(s.bad=!0,s):(s.name=e,s)}static parseHeaderValue(t){let e=t.trim();const s={};let i=e.indexOf(":");-1===i&&(i=e.length),s.name=e.slice(0,i),s.bad=""===s.name,e=e.slice(i+1),s.not=126===e.charCodeAt(0),s.not&&(e=e.slice(1)),s.value=e;const r=/^\/(.+)\/(i)?$/.exec(e);if(null!==r)try{s.re=new RegExp(r[1],r[2]||"")}catch(t){s.bad=!0}return s}};t.prototype.SelectorCompiler=class{constructor(t){this.parser=t,this.reExtendedSyntax=/\[-(?:abp|ext)-[a-z-]+=(['"])(?:.+?)(?:\1)\]/,this.reExtendedSyntaxParser=/\[-(?:abp|ext)-([a-z-]+)=(['"])(.+?)\2\]/,this.reParseRegexLiteral=/^\/(.+)\/([imu]+)?$/,this.normalizedExtendedSyntaxOperators=new Map([["contains",":has-text"],["has",":has"],["matches-css",":matches-css"],["matches-css-after",":matches-css-after"],["matches-css-before",":matches-css-before"]]),this.reSimpleSelector=/^[#.][A-Za-z_][\w-]*$/,this.div=document.createElement("div"),this.rePseudoElement=/:(?::?after|:?before|:-?[a-z][a-z-]*[a-z])$/,this.reProceduralOperator=new RegExp(["^(?:",Array.from(t.proceduralOperatorTokens.keys()).join("|"),")\\("].join("")),this.reEatBackslashes=/\\([()])/g,this.reEscapeRegex=/[.*+?^${}()|[\]\\]/g,this.reNeedScope=/^\s*>/,this.reIsDanglingSelector=/[+>~\s]\s*$/,this.reIsSiblingSelector=/^\s*[+~]/,this.regexToRawValue=new Map,this.normalizedOperators=new Map([[":-abp-contains",":has-text"],[":-abp-has",":has"],[":contains",":has-text"],[":nth-ancestor",":upward"],[":watch-attrs",":watch-attr"]]),this.actionOperators=new Set([":remove",":style"])}compile(t,e){if(s(this.parser.flavorBits,J)){if(""===(t=this.translateAdguardCSSInjectionFilter(t)))return!1;this.parser.flavorBits&=~J,e.raw=t}let i=!1;const r=this.cssSelectorType(t);if(0!==r&&(i=this.reExtendedSyntax.test(t),!1===i))return e.pseudoclass=3===r,e.compiled=t,!0;if(i){let s;for(;null!==(s=this.reExtendedSyntaxParser.exec(t));){const e=this.normalizedExtendedSyntaxOperators.get(s[1]);if(void 0===e)return!1;t=t.slice(0,s.index)+e+"("+s[3]+")"+t.slice(s.index+s[0].length)}return this.compile(t,e)}const n=this.compileProceduralSelector(t);return void 0!==n&&(void 0!==n.pseudo&&(e.pseudoclass=n.pseudo),e.compiled=JSON.stringify(n),!0)}translateAdguardCSSInjectionFilter(t){const e=/^(.*)\s*\{([^}]+)\}\s*$/.exec(t);if(null===e)return"";const s=e[1].trim(),i=e[2].trim();return/^\s*remove:\s*true[; ]*$/.test(i)?`${s}:remove()`:/display\s*:\s*none\s*!important;?$/.test(i)?s:`${s}:style(${i})`}cssSelectorType(t){if(this.reSimpleSelector.test(t))return 1;const e=this.cssPseudoElement(t);if(-1!==e)return 1===this.cssSelectorType(t.slice(0,e))?3:0;try{this.div.matches(`${t}, ${t}:not(#foo)`)}catch(t){return 0}return 1}cssPseudoElement(t){if(-1===t.lastIndexOf(":"))return-1;const e=this.rePseudoElement.exec(t);return null!==e?e.index:-1}compileProceduralSelector(t){const e=this.compileProcedural(t,!0);return void 0!==e&&(e.raw=this.decompileProcedural(e)),e}isBadRegex(t){try{new RegExp(t)}catch(t){return this.isBadRegex.message=t.toString(),!0}return!1}compileText(t){const e=this.reParseRegexLiteral.exec(t);let s;if(null!==e){if(s=e[1],this.isBadRegex(s))return;e[2]&&(s=[s,e[2]])}else s=t.replace(this.reEatBackslashes,"$1").replace(this.reEscapeRegex,"\\$&"),this.regexToRawValue.set(s,t);return s}compileCSSDeclaration(t){const e=t.indexOf(":");if(-1===e)return;const s=t.slice(0,e).trim(),i=t.slice(e+1).trim(),r=this.reParseRegexLiteral.exec(i);let n;if(null!==r){if(n=r[1],this.isBadRegex(n))return;r[2]&&(n=[n,r[2]])}else n="^"+i.replace(this.reEscapeRegex,"\\$&")+"$",this.regexToRawValue.set(n,i);return{name:s,value:n}}compileConditionalSelector(t){return this.reNeedScope.test(t)&&(t=`:scope ${t}`),this.compileProcedural(t)}compileInteger(t,e=0,s=2147483647){if(!1===/^\d+$/.test(t))return;const i=parseInt(t,10);return i<e||i>=s?void 0:i}compileNotSelector(t){if(0===this.cssSelectorType(t))return this.compileConditionalSelector(t)}compileUpwardArgument(t){const e=this.compileInteger(t,1,256);return void 0!==e?e:1===this.cssSelectorType(t)?t:void 0}compileRemoveSelector(t){if(""===t)return t}compileSpathExpression(t){if(1===this.cssSelectorType(/^\s*[+:>~]/.test(t)?"*"+t:t))return t}compileStyleProperties(t){if(!/url\(|\\/i.test(t)&&(this.div.style.cssText=t,""!==this.div.style.cssText))return this.div.style.cssText="",t}compileAttrList(t){const e=t.split("s*,s*"),s=[];for(const t of e)""!==t&&s.push(t);return s}compileXpathExpression(t){try{document.createExpression(t,null)}catch(t){return}return t}decompileProcedural(t){const e=t.tasks||[],s=[t.selector];for(const t of e){let e;switch(t[0]){case":has":case":if":s.push(`:has(${this.decompileProcedural(t[1])})`);break;case":has-text":Array.isArray(t[1])?e=`/${t[1][0]}/${t[1][1]}`:(e=this.regexToRawValue.get(t[1]),void 0===e&&(e=`/${t[1]}/`)),s.push(`:has-text(${e})`);break;case":matches-css":case":matches-css-after":case":matches-css-before":Array.isArray(t[1].value)?e=`/${t[1].value[0]}/${t[1].value[1]}`:(e=this.regexToRawValue.get(t[1].value),void 0===e&&(e=`/${t[1].value}/`)),s.push(`${t[0]}(${t[1].name}: ${e})`);break;case":not":case":if-not":s.push(`:not(${this.decompileProcedural(t[1])})`);break;case":spath":s.push(t[1]);break;case":min-text-length":case":upward":case":watch-attr":case":xpath":s.push(`${t[0]}(${t[1]})`)}}if(Array.isArray(t.action)){const[e,i]=t.action;s.push(`${e}(${i})`)}return s.join("")}compileProcedural(t,e=!1){if(""===t)return;const s=[],i=t.length;let r,n="",o=0,a=0;for(;;){let h,p;for(;o<i&&(h=t.charCodeAt(o++),58!==h||(p=this.reProceduralOperator.exec(t.slice(o)),null===p)););if(o===i)break;const c=o-1,l=o+p[0].length-1;o+=p[0].length;let u=1;for(;o<i;)if(h=t.charCodeAt(o++),92===h)o<i&&(o+=1);else if(40===h)u+=1;else if(41===h&&(u-=1,0===u))break;if(0!==u&&41!==h)return;if(1===this.cssSelectorType(t.slice(c,o)))continue;let S=t.slice(c,l);S=this.normalizedOperators.get(S)||S;const f=this.compileArgument(S,t.slice(l+1,o-1));if(void 0===f)return;if(0===a)n=t.slice(0,c);else if(c!==a){if(void 0!==r)return;const e=this.compileSpathExpression(t.slice(a,c));if(void 0===e)return;s.push([":spath",e])}if(void 0!==r)return;const d=[S,f];if(this.actionOperators.has(S)){if(!1===e)return;r=d}else s.push(d);if(a=o,o===i)break}if(0===s.length&&void 0===r)n=t;else if(a<i){if(void 0!==r)return;const e=this.compileSpathExpression(t.slice(a));if(void 0===e)return;s.push([":spath",e])}if(""!==n&&(this.reIsDanglingSelector.test(n)&&0!==s.length&&(n+=" *"),0===this.cssSelectorType(n))){if(e||!1===this.reIsSiblingSelector.test(n)||void 0===this.compileSpathExpression(n))return;s.unshift([":spath",n]),n=""}const h={selector:n};if(0!==s.length&&(h.tasks=s),void 0!==r&&(h.action=r),""!==n){const t=this.cssPseudoElement(n);if(-1!==t){if(!1===e||0!==s.length)return;h.pseudo=t}}return h}compileArgument(t,e){switch(t){case":has":case":if":case":if-not":return this.compileConditionalSelector(e);case":has-text":return this.compileText(e);case":matches-css":case":matches-css-after":case":matches-css-before":return this.compileCSSDeclaration(e);case":min-text-length":return this.compileInteger(e);case":not":return this.compileNotSelector(e);case":remove":return this.compileRemoveSelector(e);case":spath":return this.compileSpathExpression(e);case":style":return this.compileStyleProperties(e);case":upward":return this.compileUpwardArgument(e);case":watch-attr":return this.compileAttrList(e);case":xpath":return this.compileXpathExpression(e)}}},t.prototype.proceduralOperatorTokens=new Map([["-abp-contains",0],["-abp-has",0],["contains",0],["has",1],["has-text",1],["if",0],["if-not",0],["matches-css",3],["matches-css-after",3],["matches-css-before",3],["min-text-length",1],["not",1],["nth-ancestor",0],["remove",3],["style",3],["upward",1],["watch-attr",3],["watch-attrs",0],["xpath",1]]);const e=(t,e)=>0==(t&e),s=(t,e)=>0!=(t&e),i=(t,e)=>(t&e)!==e,r=0,n=1,o=2,a=3,h=1,p=2,c=4,l=8,u=16,S=32,f=64,d=128,m=256,y=512,x=1024,T=2048,g=4096,v=8192,k=16384,P=32768,B=65536,A=1<<17,w=1<<18,b=1<<19,I=1<<21,O=1<<22,E=1<<23,R=1<<24,C=1<<25,z=1<<27,$=1<<28,F=1<<29,L=1<<30,H=1<<31,N=4294967295,U=v|A,M=v|A|w|x|T|O|F,D=v|A|S,W=c|l|b,V=[0,0,0,0,0,0,0,0,0,h,h,0,0,h,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h,c,p,l,u,S,p,p,f|z,f|$,d,m,y,x,T,g,v,v,v,v,v,v,v,v,v,v,p,p,p,k,p,P,B,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,A|w,b|z,1<<20,b|$,I,O,p,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,E|z,R,E|$,C,0],_=1,j=2,q=4,G=8,Z=16,Q=32,X=64,J=128,K=256,Y=512,tt=1024,et=2048,st=1<<29,it=1<<30,rt=1<<31,nt=q|Z,ot=G|Q,at=Z|Q,ht=nt|ot,pt=255,ct=0,lt=1,ut=2,St=3,ft=4,dt=5,mt=6,yt=7,xt=8,Tt=9,gt=10,vt=11,kt=12,Pt=13,Bt=14,At=15,wt=16,bt=17,It=18,Ot=19,Et=20,Rt=21,Ct=22,zt=23,$t=24,Ft=25,Lt=26,Ht=27,Nt=28,Ut=29,Mt=30,Dt=31,Wt=32,Vt=33,_t=34,jt=35,qt=36,Gt=37,Zt=38,Qt=39,Xt=40,Jt=41,Kt=256,Yt=512,te=1024,ee=2048,se=4096,ie=8192,re=16384,ne=65536,oe=1<<17,ae=1<<18,he=1<<19,pe=1<<20,ce=1<<21,le=1<<22,ue=1<<23,Se=1<<24;t.prototype.CATNone=r,t.prototype.CATStaticExtFilter=n,t.prototype.CATStaticNetFilter=o,t.prototype.CATComment=a,t.prototype.BITSpace=h,t.prototype.BITGlyph=p,t.prototype.BITComma=y,t.prototype.BITLineComment=W,t.prototype.BITPipe=R,t.prototype.BITAsterisk=d,t.prototype.BITCaret=I,t.prototype.BITUppercase=w,t.prototype.BITHostname=M,t.prototype.BITPeriod=T,t.prototype.BITDash=x,t.prototype.BITHash=l,t.prototype.BITNum=v,t.prototype.BITEqual=k,t.prototype.BITQuestion=P,t.prototype.BITPercent=S,t.prototype.BITAlpha=A,t.prototype.BITTilde=C,t.prototype.BITUnicode=F,t.prototype.BITIgnore=L,t.prototype.BITError=H,t.prototype.BITAll=N,t.prototype.BITFlavorException=_,t.prototype.BITFlavorExtStyle=J,t.prototype.BITFlavorExtStrong=K,t.prototype.BITFlavorExtCosmetic=Y,t.prototype.BITFlavorExtScriptlet=tt,t.prototype.BITFlavorExtHTML=et,t.prototype.BITFlavorIgnore=st,t.prototype.BITFlavorUnsupported=it,t.prototype.BITFlavorError=rt,t.prototype.OPTToken1p=lt,t.prototype.OPTToken1pStrict=ut,t.prototype.OPTToken3p=St,t.prototype.OPTToken3pStrict=ft,t.prototype.OPTTokenAll=dt,t.prototype.OPTTokenBadfilter=mt,t.prototype.OPTTokenCname=yt,t.prototype.OPTTokenCsp=xt,t.prototype.OPTTokenDenyAllow=gt,t.prototype.OPTTokenDoc=vt,t.prototype.OPTTokenDomain=kt,t.prototype.OPTTokenEhide=Pt,t.prototype.OPTTokenEmpty=Bt,t.prototype.OPTTokenFont=At,t.prototype.OPTTokenGenericblock=bt,t.prototype.OPTTokenGhide=It,t.prototype.OPTTokenHeader=Ot,t.prototype.OPTTokenImage=Et,t.prototype.OPTTokenImportant=Rt,t.prototype.OPTTokenInlineFont=Ct,t.prototype.OPTTokenInlineScript=zt,t.prototype.OPTTokenInvalid=ct,t.prototype.OPTTokenMatchCase=$t,t.prototype.OPTTokenMedia=Ft,t.prototype.OPTTokenMp4=Lt,t.prototype.OPTTokenNoop=Ht,t.prototype.OPTTokenObject=Nt,t.prototype.OPTTokenOther=Ut,t.prototype.OPTTokenPing=Mt,t.prototype.OPTTokenPopunder=Dt,t.prototype.OPTTokenPopup=Wt,t.prototype.OPTTokenQueryprune=jt,t.prototype.OPTTokenRedirect=Vt,t.prototype.OPTTokenRedirectRule=_t,t.prototype.OPTTokenScript=qt,t.prototype.OPTTokenShide=Gt,t.prototype.OPTTokenCss=Tt,t.prototype.OPTTokenFrame=wt,t.prototype.OPTTokenXhr=Zt,t.prototype.OPTTokenWebrtc=Qt,t.prototype.OPTTokenWebsocket=Xt,t.prototype.OPTCanNegate=Kt,t.prototype.OPTBlockOnly=Yt,t.prototype.OPTAllowOnly=te,t.prototype.OPTMustAssign=ee,t.prototype.OPTAllowMayAssign=se,t.prototype.OPTDomainList=re,t.prototype.OPTNetworkType=ne,t.prototype.OPTModifiableType=ae,t.prototype.OPTNotSupported=Se;const fe=new Map([["1p",lt|Kt],["first-party",lt|Kt],["strict1p",ut],["3p",St|Kt],["third-party",St|Kt],["strict3p",ft],["all",dt|ne|le],["badfilter",mt],["cname",yt|te|he],["csp",xt|ee|se|he],["css",Tt|Kt|ne|ae|pe|le],["stylesheet",Tt|Kt|ne|ae|pe|le],["denyallow",gt|ee|re|ue|le],["doc",vt|ne|Kt|ae|pe],["document",vt|ne|Kt|ae|pe],["domain",kt|ee|re],["ehide",Pt|oe|le|ce],["elemhide",Pt|oe|le|ce],["empty",Bt|Yt|he],["frame",wt|Kt|ne|ae|pe],["subdocument",wt|Kt|ne|ae|pe],["font",At|Kt|ne|ae|le],["genericblock",bt|Se],["ghide",It|oe|le|ce],["generichide",It|oe|le|ce],["header",Ot|ee|se|le|ce],["image",Et|Kt|ne|ae|pe|le],["important",Rt|Yt],["inline-font",Ct|oe|Kt|le|ce],["inline-script",zt|oe|Kt|le|ce],["match-case",$t],["media",Ft|Kt|ne|ae|pe|le],["mp4",Lt|ne|Yt|he],["_",Ht],["object",Nt|Kt|ne|ae|pe|le],["object-subrequest",Nt|Kt|ne|ae|pe|le],["other",Ut|Kt|ne|ae|pe|le],["ping",Mt|Kt|ne|ae|le|ce],["beacon",Mt|Kt|ne|ae|le|ce],["popunder",Dt|oe|le|ce],["popup",Wt|oe|Kt|le|ce],["queryprune",jt|ie|he|le|ce],["removeparam",jt|ie|he|le|ce],["redirect",Vt|ee|se|he],["rewrite",Vt|ee|se|he],["redirect-rule",_t|ee|se|he|le],["script",qt|Kt|ne|ae|pe|le],["shide",Gt|oe|le|ce],["specifichide",Gt|oe|le|ce],["xhr",Zt|Kt|ne|ae|pe|le],["xmlhttprequest",Zt|Kt|ne|ae|pe|le],["webrtc",Qt|Se],["websocket",Xt|Kt|ne|ae|le|ce]]);t.prototype.netOptionTokenDescriptors=t.netOptionTokenDescriptors=fe,t.netOptionTokenIds=new Map([["1p",lt],["first-party",lt],["strict1p",ut],["3p",St],["third-party",St],["strict3p",ft],["all",dt],["badfilter",mt],["cname",yt],["csp",xt],["css",Tt],["stylesheet",Tt],["denyallow",gt],["doc",vt],["document",vt],["domain",kt],["ehide",Pt],["elemhide",Pt],["empty",Bt],["frame",wt],["subdocument",wt],["font",At],["genericblock",bt],["ghide",It],["generichide",It],["header",Ot],["image",Et],["important",Rt],["inline-font",Ct],["inline-script",zt],["match-case",$t],["media",Ft],["mp4",Lt],["_",Ht],["object",Nt],["object-subrequest",Nt],["other",Ut],["ping",Mt],["beacon",Mt],["popunder",Dt],["popup",Wt],["queryprune",jt],["removeparam",jt],["redirect",Vt],["rewrite",Vt],["redirect-rule",_t],["script",qt],["shide",Gt],["specifichide",Gt],["xhr",Zt],["xmlhttprequest",Zt],["webrtc",Qt],["websocket",Xt]]),t.netOptionTokenNames=new Map([[lt,"1p"],[ut,"strict1p"],[St,"3p"],[ft,"strict3p"],[dt,"all"],[mt,"badfilter"],[yt,"cname"],[xt,"csp"],[Tt,"stylesheet"],[gt,"denyallow"],[vt,"document"],[kt,"domain"],[Pt,"elemhide"],[Bt,"empty"],[wt,"subdocument"],[At,"font"],[bt,"genericblock"],[It,"generichide"],[Ot,"header"],[Et,"image"],[Rt,"important"],[Ct,"inline-font"],[zt,"inline-script"],[$t,"match-case"],[Ft,"media"],[Lt,"mp4"],[Ht,"_"],[Nt,"object"],[Ut,"other"],[Mt,"ping"],[Dt,"popunder"],[Wt,"popup"],[jt,"queryprune"],[Vt,"redirect"],[_t,"redirect-rule"],[qt,"script"],[Gt,"specifichide"],[Zt,"xmlhttprequest"],[Qt,"webrtc"],[Xt,"websocket"]]);const de=class{constructor(){this.reset()}reset(){this.i=this.len=0}},me=class{constructor(t){this.parser=t,this.exception=!1,this.interactive=!1,this.optSlices=[],this.writePtr=0,this.readPtr=0,this.tokenPos=(()=>{const t=[];for(let e=0;e<Jt;e++)t[e]=-1;return t})(),this.item={id:ct,val:void 0,not:!1},this.value=void 0,this.done=!0}[Symbol.iterator](){return this.init()}init(){if(this.readPtr=this.writePtr=0,this.done=0===this.parser.optionsSpan.len,this.done)return this.value=void 0,this;this.value=this.item,this.exception=this.parser.isException(),this.interactive=this.parser.interactive,this.tokenPos.fill(-1);const i=this.parser.optionsSpan.i,r=i+this.parser.optionsSpan.len,n=this.parser.slices,o=this.optSlices;let a=0,h=0,p=i;for(;p<r;){let t=!0,i=p;s(n[p],C)&&(n[p+2]>1&&(t=!1),i+=3);let c=0,l=i;for(;l<r;){const t=n[l];if(s(t,y)){this.interactive&&(l===p||n[l+2]>1)&&(n[l]|=H);break}0===c&&s(t,k)&&(c=l),l+=3}let u,S=!1;if(t&&0!==c&&(t=S=1===n[c+2]&&c+3!==l),t){const t=0===c?l:c,e=this.parser.raw.slice(n[i+1],n[t+1]);u=fe.get(e)}(void 0===u||i!==p&&e(u,Kt)||this.exception&&s(u,Yt)||!1===this.exception&&s(u,te)||S&&e(u,ie|ee)||!1===S&&s(u,ee)&&(!1===this.exception||e(u,se)))&&(u=ct);const f=u&pt;f!==ct&&(-1!==this.tokenPos[f]?u=ct:this.tokenPos[f]=h),s(u,he)&&s(a,he)&&(u=ct),a|=u,this.interactive&&(u===ct||s(u,Se))&&this.parser.errorSlices(p,l),o[h+0]=u,o[h+1]=p,o[h+2]=i,0!==c?(o[h+3]=c,o[h+4]=c+3,this.interactive&&s(u,re)&&this.parser.analyzeDomainList(c+3,l,R,f===kt?10:0)):(o[h+3]=l,o[h+4]=l),o[h+5]=l,h+=6,p=l+3}this.writePtr=h,this.interactive&&s(this.parser.slices[r-3],y)&&(this.parser.slices[r-3]|=H);{const t=this.tokenPos[gt];-1!==t&&-1===this.tokenPos[kt]&&(o[t]=ct,this.interactive&&this.parser.errorSlices(o[t+1],o[t+5]))}{let t=this.tokenPos[Vt];-1===t&&(t=this.tokenPos[_t]),-1!==t&&s(a,ce)&&(o[t]=ct,this.interactive&&this.parser.errorSlices(o[t+1],o[t+5]))}{let t=this.tokenPos[Bt];-1!==t&&s(a,ce)&&(o[t]=ct,this.interactive&&this.parser.errorSlices(o[t+1],o[t+5]))}{const t=this.tokenPos[xt];-1!==t&&s(a,le)&&(o[t]=ct,this.interactive&&this.parser.errorSlices(o[t+1],o[t+5]))}{const e=this.tokenPos[jt];if(-1!==e)if(s(a,oe))o[e]=ct,this.interactive&&this.parser.errorSlices(o[e+1],o[e+5]);else{const s=this.parser.strFromSlices(o[e+4],o[e+5]-3);t.parseQueryPruneValue(s).bad&&(o[e]=ct,this.interactive&&this.parser.errorSlices(o[e+4],o[e+5]))}}{const t=this.tokenPos[yt];-1!==t&&(s(a,ne)||s(a,oe))&&(o[t]=ct,this.interactive&&this.parser.errorSlices(o[t+1],o[t+5]))}{const e=this.tokenPos[Ot];if(-1!==e)if(!1===this.parser.expertMode||s(a,he))o[e]=ct,this.interactive&&this.parser.errorSlices(o[e+1],o[e+5]);else{const s=this.parser.strFromSlices(o[e+4],o[e+5]-3);t.parseHeaderValue(s).bad&&(o[e]=ct,this.interactive&&this.parser.errorSlices(o[e+4],o[e+5]))}}{const t=this.tokenPos[$t];-1!==t&&!1===this.parser.patternIsRegex()&&(o[t]=ct,this.interactive&&this.parser.errorSlices(o[t+1],o[t+5]))}return this}next(){const t=this.readPtr;if(t===this.writePtr)return this.value=void 0,this.done=!0,this;const e=this.optSlices,s=e[t+0];if(this.item.id=s&pt,this.item.not=e[t+2]!==e[t+1],this.item.val=void 0,e[t+4]!==e[t+5]){const s=this.parser;this.item.val=s.raw.slice(s.slices[e[t+4]+1],s.slices[e[t+5]+1])}return this.readPtr=t+6,this}},ye=class{constructor(t){this.parser=t,this.l=this.r=this.i=0,this.value=void 0,this.done=!0}[Symbol.iterator](){const{i:t,len:e}=this.parser.patternSpan;return 0===e?this.end():(this.l=t,this.r=t+e,this.i=t,this.done=!1,this.value={token:"",pos:0},this)}end(){return this.value=void 0,this.done=!0,this}next(){const{slices:t,maxTokenLength:i}=this.parser;let{l:r,r:n,i:o,value:a}=this,h=o,p=0;for(;;){for(;;){if(h>=n)return this.end();if(s(t[h],D))break;h+=3}for(p=h+3;p<n&&s(t[p],D);)p+=3;if((0===h||e(t[h-3],d))&&(p===n||e(t[p],d)||t[p+1]-t[h+1]>=i))break;h=p+3}this.i=p+3;const c=t[h+1];return a.token=this.parser.raw.slice(c,t[p+1]),a.pos=c-t[r+1],this}},xe=class{constructor(t){this.parser=t,this.l=this.r=0,this.value=void 0,this.done=!0}[Symbol.iterator](){const{i:t,len:e}=this.parser.optionsSpan;return 0===e?(this.l=this.r=0,this.done=!0,this.value=void 0):(this.l=t,this.r=t+e,this.done=!1,this.value={hn:void 0,not:!1,bad:!1}),this}next(){if(this.l===this.r)return this.value=void 0,this.done=!0,this;const t=this.parser,{slices:e,interactive:i}=t,r=this.value;r.not=r.bad=!1;let n=this.l,o=n;for(s(e[o],C)&&(1!==e[o+2]&&(r.bad=!0,i&&(e[o]|=H)),r.not=!0,o+=3,n=o);o<this.r&&!s(e[o],y);)o+=3;return o===n&&(r.bad=!0),r.hn=t.raw.slice(e[n+1],e[o+1]),o<this.r&&(o+=3),this.l=o,this}};t.regexUtils=t.prototype.regexUtils=(()=>{const t=t=>/^[\x01%0-9A-Za-z]/.test(t)?1:0,e=t=>/[\x01%0-9A-Za-z]$/.test(t)?1:0,s=i=>{switch(i.type){case 1:{let t="";for(let e=0;e<i.val.length;e++)t+=s(i.val[e]);return t}case 2:case 8:{let r=0,n=0;for(let o=0;o<i.val.length;o++){const a=s(i.val[o]);if(0===r&&1===t(a)&&(r=1),0===n&&1===e(a)&&(n=1),1===r&&1===n)break}return String.fromCharCode(r,n)}case 4:return 1===i.flags.NegativeLookAhead||1===i.flags.NegativeLookBehind?"":s(i.val);case 16:{const r=s(i.val),n=t(r),o=e(r);return 0===i.flags.min&&0===n&&0===o?"":String.fromCharCode(n,o)}case 64:return String.fromCharCode(parseInt(i.val.slice(1),16));case 128:{const t=i.flags;if(1===t.EndCharGroup||1===t.EndGroup||1===t.EndRepeats)throw new Error("Unmatched bracket");return 1===t.MatchEnd||1===t.MatchStart||1===t.MatchWordBoundary?"\0":""}case 256:for(let e=0;e<i.val.length;e++)if(1===t(i.val[e]))return"";return"\0";case 512:return"";case 1024:return i.val;case 2048:return""}return""},i=self.Regex;return i instanceof Object==0||i.Analyzer instanceof Object==0?{isValid:function(t){try{new RegExp(t)}catch(t){return!1}return!0},toTokenizableStr:()=>""}:{isValid:function(t){try{new RegExp(t),s(i.Analyzer(t,!1).tree())}catch(t){return!1}return!0},toTokenizableStr:function(t){try{return s(i.Analyzer(t,!1).tree())}catch(t){}return""}}})(),"object"==typeof vAPI&&null!==vAPI?vAPI.StaticFilteringParser=t:self.StaticFilteringParser=t}