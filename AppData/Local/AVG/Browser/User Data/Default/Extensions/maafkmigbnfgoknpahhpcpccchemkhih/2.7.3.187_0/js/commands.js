"use strict";µBlock.canUseShortcuts=vAPI.commands instanceof Object,µBlock.canUpdateShortcuts=µBlock.canUseShortcuts&&vAPI.webextFlavor.soup.has("firefox")&&"function"==typeof vAPI.commands.update,µBlock.canUpdateShortcuts&&self.addEventListener("webextFlavor",(()=>{const e=µBlock;e.canUpdateShortcuts=vAPI.webextFlavor.major<74,!1!==e.canUpdateShortcuts&&vAPI.storage.get("commandShortcuts").then((t=>{if(t instanceof Object==0)return;const o=t.commandShortcuts;if(!1!==Array.isArray(o)){e.commandShortcuts=new Map(o);for(const[e,t]of o)vAPI.commands.update({name:e,shortcut:t})}}))}),{once:!0}),(()=>{if(!1===µBlock.canUseShortcuts)return;const e=(()=>{const e=new Map;return function(t){if(t instanceof Object==0||t.id<=0)return;const o=µBlock,n=o.normalizePageURL(t.id,t.url);if(!1===o.getNetFilteringSwitch(n))return;const a=o.URI.hostnameFromURI(n),s=o.blockingModeFromHostname(a);let c;for(const e of o.liveBlockingProfiles)if((s&e.bits&-2)!==s){c=e.bits;break}if(void 0===c)return;const r=0==(1&c);if(0!=(2&s)&&0==(2&c)&&o.toggleHostnameSwitch({name:"no-scripting",hostname:a,state:!1}),o.userSettings.advancedUserEnabled&&(0!=(4&s)&&0==(4&c)&&o.toggleFirewallRule({tabId:r?t.id:void 0,srcHostname:a,desHostname:"*",requestType:"3p",action:3}),0!=(8&s)&&0==(8&c)&&o.toggleFirewallRule({srcHostname:a,desHostname:"*",requestType:"3p-script",action:3}),0!=(16&s)&&0==(16&c)&&o.toggleFirewallRule({srcHostname:a,desHostname:"*",requestType:"3p-frame",action:3})),r)return;let i=e.get(t.id);void 0!==i&&clearTimeout(i),i=vAPI.setTimeout((t=>{e.delete(t),vAPI.tabs.reload(t)}),547,t.id),e.set(t.id,i)}})();vAPI.commands.onCommand.addListener((async t=>{const o=µBlock;switch(t){case"launch-element-picker":case"launch-element-zapper":{const e=await vAPI.tabs.getCurrent();if(e instanceof Object==0)return;o.epickerArgs.mouse=!1,o.elementPickerExec(e.id,0,void 0,"launch-element-zapper"===t);break}case"launch-logger":{const e=await vAPI.tabs.getCurrent();if(e instanceof Object==0)return;const t=e.url.startsWith(vAPI.getURL(""))?"":`#_+${e.id}`;o.openNewTab({url:`logger-ui.html${t}`,select:!0,index:-1});break}case"open-dashboard":o.openNewTab({url:"dashboard.html",select:!0,index:-1});break;case"relax-blocking-mode":e(await vAPI.tabs.getCurrent())}}))})();