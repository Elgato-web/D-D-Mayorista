"use strict";(()=>{const e=vAPI.messaging;let t={};{const e=/details=([^&]+)/.exec(window.location.search);null!==e&&(t=JSON.parse(decodeURIComponent(e[1])))}(async()=>{const n=await e.send("documentBlocked",{what:"listsFromNetFilter",rawFilter:t.fs});if(n instanceof Object==0)return;let o;for(const e in n)if(n.hasOwnProperty(e)){o=n[e];break}if(!1===Array.isArray(o)||0===o.length)return;const c=uDom.nodeFromSelector("#whyex > span:nth-of-type(2)");for(const e of o){const t=document.querySelector("#templates .filterList").cloneNode(!0),n=t.querySelector(".filterListSource");if(n.href+=encodeURIComponent(e.assetKey),n.textContent=e.title,"string"==typeof e.supportURL&&""!==e.supportURL){const n=t.querySelector(".filterListSupport");n.setAttribute("href",e.supportURL),n.classList.remove("hidden")}c.appendChild(t)}uDom.nodeFromId("whyex").style.removeProperty("display")})(),(()=>{const e=/^(.*)\{\{hostname\}\}(.*)$/.exec(vAPI.i18n("docblockedProceed"));if(null===e)return;const n=document.querySelector("#templates .proceed").cloneNode(!0);n.children[0].textContent=e[1],n.children[2].textContent=e[2];const o=n.querySelector(".hn");t.hn!==t.dn?(o.textContent=t.hn,o.setAttribute("value",t.hn)):o.remove();const c=n.querySelector(".dn");c.textContent=t.dn,c.setAttribute("value",t.dn),document.getElementById("proceed").append(n)})(),uDom.nodeFromSelector("#theURL > p > span:first-of-type").textContent=t.url,uDom.nodeFromId("why").textContent=t.fs,(()=>{if("function"!=typeof URL)return;const e=/^https?:\/\//,n=function(t,n){""===n&&(n=t,t="");const o=document.createElement("li");let c=document.createElement("span");if(c.textContent=t,o.appendChild(c),""!==t&&""!==n&&o.appendChild(document.createTextNode(" = ")),c=document.createElement("span"),e.test(n)){const e=document.createElement("a");e.href=e.textContent=n,c.appendChild(e)}else c.textContent=n;return o.appendChild(c),o},o=function(e){try{e=decodeURIComponent(e)}catch(e){}return e},c=function(t,r){const s=document.createElement("a");if(s.href=r,0===s.search.length)return!1;let l=r.indexOf("?");const d=n(vAPI.i18n("docblockedNoParamsPrompt"),r.slice(0,l));t.appendChild(d);const a=s.search.slice(1).split("&");for(const r of a){let s=r.indexOf("=");-1===s&&(s=r.length);const l=o(r.slice(0,s)),d=o(r.slice(s+1)),a=n(l,d);if(e.test(d)){const e=document.createElement("ul");c(e,d),a.appendChild(e)}t.appendChild(a)}return!0};!1!==c(uDom.nodeFromId("parsed"),t.url)&&(document.querySelector("#theURL > p > span:last-of-type").addEventListener("click",(()=>{const e=uDom.nodeFromId("theURL").classList;e.toggle("collapsed"),vAPI.localStorage.setItem("document-blocked-expand-url",(!1===e.contains("collapsed")).toString())})),vAPI.localStorage.getItemAsync("document-blocked-expand-url").then((e=>{uDom.nodeFromId("theURL").classList.toggle("collapsed","true"!==e&&!0!==e)})))})(),window.history.length>1?(uDom("#back").on("click",(()=>{window.history.back()})),uDom("#bye").css("display","none")):(uDom("#bye").on("click",(()=>{e.send("documentBlocked",{what:"closeThisTab"})})),uDom("#back").css("display","none"));const n=function(){const e=document.querySelector("#proceed select");return null===e?t.hn:e.value},o=function(){window.location.replace(t.url)};uDom("#proceedTemporary").attr("href",t.url).on("click",(async function(){await e.send("documentBlocked",{what:"temporarilyWhitelistDocument",hostname:n()}),o()})),uDom("#proceedPermanent").attr("href",t.url).on("click",(async function(){await e.send("documentBlocked",{what:"toggleHostnameSwitch",name:"no-strict-blocking",hostname:n(),deep:!0,state:!0,persist:!0}),o()}))})();